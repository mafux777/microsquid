"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTypesFromBundle = void 0;
const metadata_1 = require("./definitions/metadata");
const substrate_1 = require("./definitions/substrate");
function getTypesFromBundle(bundle, specVersion) {
    let types = {
        types: {
            ...metadata_1.types,
            ...substrate_1.substrateBundle.types,
            ...bundle.types
        },
        typesAlias: {
            ...substrate_1.substrateBundle.typesAlias,
            ...bundle.typesAlias
        }
    };
    if (!bundle.versions?.length)
        return types;
    for (let i = 0; i < bundle.versions.length; i++) {
        let override = bundle.versions[i];
        if (isWithinRange(override.minmax, specVersion)) {
            Object.assign(types.types, override.types);
            Object.assign(types.typesAlias, override.typesAlias);
        }
    }
    return types;
}
exports.getTypesFromBundle = getTypesFromBundle;
function isWithinRange(range, version) {
    let beg = range[0] ?? 0;
    let end = range[1] ?? Infinity;
    return beg <= version && version <= end;
}
//# sourceMappingURL=typesBundle.js.map